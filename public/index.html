<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cloud Price Studio</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,600;9..144,700&family=Space+Grotesk:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <div class="background">
      <div class="orb orb--one"></div>
      <div class="orb orb--two"></div>
      <div class="grain"></div>
    </div>
    <main class="app">
      <header class="hero">
        <span class="badge">Cloud Price Studio</span>
        <h1>Compare VM and Kubernetes pricing across AWS, Azure, and GCP.</h1>
        <p>
          Windows-only pricing with a selectable disk tier and a 10+ Gbps
          network floor. Use the tabs to switch between VM sizing and managed
          Kubernetes estimates, then compare monthly totals across AWS, Azure,
          and GCP.
        </p>
      </header>
      <div class="mode-tabs">
        <button type="button" class="mode-tab active" data-mode="vm">
          VM
        </button>
        <button type="button" class="mode-tab" data-mode="k8s">
          K8s
        </button>
      </div>
      <section class="layout">
        <form id="pricing-form" class="card form-card">
          <input type="hidden" name="mode" id="mode-input" value="vm" />
          <div class="card-header">
            <h2 id="form-title">Workload inputs</h2>
            <p id="form-subtitle">
              Windows only, no local or temp disks, disk tier selectable,
              network >= 10 Gbps.
            </p>
          </div>
          <div class="form-grid">
            <label id="workload-field">
              Workload profile
              <select name="workload" id="workload-select">
                <option value="general">General purpose</option>
                <option value="sql">SQL Server</option>
                <option value="web">Web Server</option>
              </select>
            </label>
            <label>
              <span id="cpu-label">CPU cores (min 8)</span>
              <select name="cpu" id="cpu-select"></select>
            </label>
            <label>
              <span id="vm-count-label">VM count</span>
              <input
                type="number"
                name="vmCount"
                min="1"
                step="1"
                value="1"
              />
            </label>
            <label>
              Region group
              <select name="regionKey">
                <option value="us-east">US East (N. Virginia / East US)</option>
                <option value="us-west">US West (Oregon / West US 2)</option>
                <option value="ca-central">
                  Canada Central (Canada (Central) / Canada Central / Montreal)
                </option>
                <option value="eu-west">EU West (Ireland / West Europe)</option>
                <option value="eu-north">EU North (Stockholm / North Europe)</option>
                <option value="ap-sg">
                  Asia Pacific (Singapore / Southeast Asia)
                </option>
                <option value="ap-au">
                  Australia (Sydney / Australia East)
                </option>
              </select>
            </label>
            <label id="sql-edition-field">
              SQL edition
              <select name="sqlEdition">
                <option value="none">None</option>
                <option value="standard">MS SQL Standard</option>
                <option value="enterprise">MS SQL Enterprise</option>
              </select>
            </label>
            <label>
              Price provider
              <select name="pricingProvider">
                <option value="retail">Retail (Vantage)</option>
                <option value="api">API (cloud provider)</option>
              </select>
            </label>
            <label>
              Disk tier
              <select name="diskTier" id="disk-tier-select">
                <option value="max" selected>
                  Max performance (Ultra/Extreme/io2 BE)
                </option>
                <option value="premium">Premium SSD</option>
              </select>
            </label>
            <label>
              <span id="os-disk-label">OS disk (GB)</span>
              <input
                type="number"
                name="osDiskGb"
                min="0"
                step="1"
                value="256"
              />
            </label>
            <label>
              <span id="data-disk-label">Data disk (TB)</span>
              <input
                type="number"
                name="dataDiskTb"
                min="0"
                step="0.1"
                value="1"
              />
            </label>
            <label class="checkbox-field">
              <input type="checkbox" name="backupEnabled" />
              <span>Enable backups (15-day retention, 10% daily delta)</span>
            </label>
            <label>
              <span id="egress-label">Egress (TB / month)</span>
              <input
                type="number"
                name="egressTb"
                min="1"
                step="0.1"
                value="1"
              />
            </label>
            <label>
              DR uplift (% of compute + storage + SQL)
              <input
                type="number"
                name="drPercent"
                min="0"
                step="1"
                value="0"
              />
            </label>
            <label>
              Hours / month
              <input
                type="number"
                name="hours"
                min="1"
                step="1"
                value="730"
              />
            </label>
            <label id="sql-rate-field">
              SQL license add-on ($/vCPU-hour)
              <input
                type="number"
                name="sqlLicenseRate"
                min="0"
                step="0.01"
                value="0"
              />
            </label>
          </div>
          <div class="form-actions">
            <button type="submit" class="primary-btn">Compare pricing</button>
            <button type="button" class="secondary-btn" id="export-csv">
              Export CSV
            </button>
          </div>
          <p id="form-note" class="form-note"></p>
        </form>
        <section class="card results-card">
          <div class="card-header">
            <h2 id="results-title">Price comparison</h2>
            <p id="results-subtitle">
              Live compute rates + estimated storage, egress, and SQL.
            </p>
          </div>
          <div class="results-grid">
            <article class="provider-card" id="aws-card">
              <div class="provider-head">
                <div>
                  <h3 id="aws-title">AWS</h3>
                  <span class="provider-family" id="aws-family"></span>
                </div>
                <span class="status-pill" id="aws-status">checking</span>
              </div>
              <div class="metrics">
                <div class="metric">
                  <span>Instance</span>
                  <select
                    class="provider-select"
                    id="aws-instance"
                    name="awsInstanceType"
                    form="pricing-form"
                  ></select>
                </div>
                <div class="metric">
                  <span>vCPU / RAM</span>
                  <strong id="aws-shape">-</strong>
                </div>
                <div class="metric">
                  <span>Region</span>
                  <strong id="aws-region">-</strong>
                </div>
                <div class="metric">
                  <span>Compute rate</span>
                  <strong id="aws-hourly">-</strong>
                </div>
                <div class="metric">
                  <span>Network</span>
                  <strong id="aws-network">-</strong>
                </div>
              </div>
              <div class="price-tiers">
                <div class="tier-card">
                  <span>On-demand</span>
                  <strong id="aws-od-total">-</strong>
                  <small id="aws-od-rate">-</small>
                </div>
                <div class="tier-card">
                  <span>1-year</span>
                  <strong id="aws-1y-total">-</strong>
                  <small id="aws-1y-rate">-</small>
                </div>
                <div class="tier-card">
                  <span>3-year</span>
                  <strong id="aws-3y-total">-</strong>
                  <small id="aws-3y-rate">-</small>
                </div>
              </div>
              <p class="tier-savings" id="aws-savings"></p>
              <p class="breakdown" id="aws-breakdown"></p>
              <p class="provider-note" id="aws-note"></p>
            </article>
            <article class="provider-card" id="azure-card">
              <div class="provider-head">
                <div>
                  <h3 id="azure-title">Azure</h3>
                  <span class="provider-family" id="azure-family"></span>
                </div>
                <span class="status-pill" id="azure-status">checking</span>
              </div>
              <div class="metrics">
                <div class="metric">
                  <span>Instance</span>
                  <select
                    class="provider-select"
                    id="azure-instance"
                    name="azureInstanceType"
                    form="pricing-form"
                  ></select>
                </div>
                <div class="metric">
                  <span>vCPU / RAM</span>
                  <strong id="azure-shape">-</strong>
                </div>
                <div class="metric">
                  <span>Region</span>
                  <strong id="azure-region">-</strong>
                </div>
                <div class="metric">
                  <span>Compute rate</span>
                  <strong id="azure-hourly">-</strong>
                </div>
                <div class="metric">
                  <span>Network</span>
                  <strong id="azure-network">-</strong>
                </div>
              </div>
              <div class="price-tiers">
                <div class="tier-card">
                  <span>On-demand</span>
                  <strong id="azure-od-total">-</strong>
                  <small id="azure-od-rate">-</small>
                </div>
                <div class="tier-card">
                  <span>1-year</span>
                  <strong id="azure-1y-total">-</strong>
                  <small id="azure-1y-rate">-</small>
                </div>
                <div class="tier-card">
                  <span>3-year</span>
                  <strong id="azure-3y-total">-</strong>
                  <small id="azure-3y-rate">-</small>
                </div>
              </div>
              <p class="tier-savings" id="azure-savings"></p>
              <p class="breakdown" id="azure-breakdown"></p>
              <p class="provider-note" id="azure-note"></p>
            </article>
            <article class="provider-card" id="gcp-card">
              <div class="provider-head">
                <div>
                  <h3 id="gcp-title">GCP</h3>
                  <span class="provider-family" id="gcp-family"></span>
                </div>
                <span class="status-pill" id="gcp-status">checking</span>
              </div>
              <div class="metrics">
                <div class="metric">
                  <span>Instance</span>
                  <select
                    class="provider-select"
                    id="gcp-instance"
                    name="gcpInstanceType"
                    form="pricing-form"
                  ></select>
                </div>
                <div class="metric">
                  <span>vCPU / RAM</span>
                  <strong id="gcp-shape">-</strong>
                </div>
                <div class="metric">
                  <span>Region</span>
                  <strong id="gcp-region">-</strong>
                </div>
                <div class="metric">
                  <span>Compute rate</span>
                  <strong id="gcp-hourly">-</strong>
                </div>
                <div class="metric">
                  <span>Network</span>
                  <strong id="gcp-network">-</strong>
                </div>
              </div>
              <div class="price-tiers">
                <div class="tier-card">
                  <span>On-demand</span>
                  <strong id="gcp-od-total">-</strong>
                  <small id="gcp-od-rate">-</small>
                </div>
                <div class="tier-card">
                  <span>1-year</span>
                  <strong id="gcp-1y-total">-</strong>
                  <small id="gcp-1y-rate">-</small>
                </div>
                <div class="tier-card">
                  <span>3-year</span>
                  <strong id="gcp-3y-total">-</strong>
                  <small id="gcp-3y-rate">-</small>
                </div>
              </div>
              <p class="tier-savings" id="gcp-savings"></p>
              <p class="breakdown" id="gcp-breakdown"></p>
              <p class="provider-note" id="gcp-note"></p>
            </article>
          </div>
          <div class="delta" id="delta"></div>
          <p class="disclaimer">
            Storage uses the selected disk tier (Premium SSD or Max performance
            with an uplift for ultra tiers; per-IOPS charges are not modeled).
            In Kubernetes mode, data storage uses shared file storage
            (EFS/Azure Files/Filestore), priced per cluster from public provider
            pricing (cached; falls back to defaults); SQL pricing is disabled.
            Backups assume 15-day retention with 10% daily delta changes and
            use the same per-GB rate when enabled. DR uplift applies to compute
            + storage + backups + SQL (egress excluded). Egress uses base
            internet out pricing for the first tier. SQL license add-on is
            estimated per vCPU-hour and can be overridden. AWS compute uses
            Windows BYOL pricing; SQL is added via the license input. Kubernetes
            mode uses Linux nodes and adds premium control plane fees (EKS
            ~$365/mo, AKS ~$438/mo, GKE ~$365/mo at 730 hours). Pricing provider
            toggles cloud APIs versus the public Vantage snapshot. API mode
            requires AWS/GCP credentials (Azure Retail Prices API is public);
            missing keys are reported per provider. Retail mode uses Vantage
            snapshots. GCP network is shown as Variable and is not filtered by
            the 10 Gbps floor. Reserved tiers use 1-year and 3-year no-upfront
            terms and apply to compute only; GCP reserved tiers are not
            included. AWS reserved pricing is set to Convertible (no upfront).
            Data and egress disk math treats 1 TB as 1024 GB.
          </p>
        </section>
      </section>
    </main>
    <script src="/app.js"></script>
  </body>
</html>
